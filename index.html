<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>正则表达式可视化编辑器</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Noto+Sans+SC:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <header class="page-header">
    <h1>正则表达式可视化编辑器</h1>
    <p>直接部署在 GitHub Pages 的轻量级正则工具，支持常用语法片段快速插入、实时匹配预览与语法解释。</p>
  </header>
  <main class="page-grid">
    <section class="panel">
      <h2>表达式构建</h2>
      <div class="field">
        <label for="regex-input">正则表达式</label>
        <div class="input-wrapper">
          <span class="delimiter">/</span>
          <textarea id="regex-input" spellcheck="false" rows="3"></textarea>
          <span class="delimiter">/</span>
          <div class="flags" id="flag-container">
            <label><input type="checkbox" value="g">g</label>
            <label><input type="checkbox" value="m">m</label>
            <label><input type="checkbox" value="i">i</label>
            <label><input type="checkbox" value="s">s</label>
            <label><input type="checkbox" value="u">u</label>
            <label><input type="checkbox" value="y">y</label>
          </div>
        </div>
      </div>

      <div class="toolbar" aria-label="语法快捷插入">
        <button data-insert="^">^ 开头</button>
        <button data-insert="$">$ 结尾</button>
        <button data-insert=".">任意字符</button>
        <button data-insert="\\d">数字</button>
        <button data-insert="\\w">单词字符</button>
        <button data-insert="\\s">空白</button>
        <button data-wrap="()">分组()</button>
        <button data-wrap="[]">字符集[]</button>
        <button data-template="(?:‖)" title="非捕获分组">(?: )</button>
        <button data-template="(?<name>‖)" title="命名分组">(?&lt;name&gt; )</button>
        <button data-template="(?=‖)" title="正向前瞻">(?= )</button>
        <button data-template="(?!‖)" title="负向前瞻">(?! )</button>
        <button data-template="(?<=‖)" title="正向后顾">(?<= )</button>
        <button data-template="(?<!‖)" title="负向后顾">(?<! )</button>
        <button data-insert="*">*</button>
        <button data-insert="+">+</button>
        <button data-insert="?">?</button>
        <button data-template="{‖}" title="范围量词">{ }</button>
      </div>

      <div class="field">
        <label for="sample-input">测试文本</label>
        <textarea id="sample-input" rows="6" placeholder="在此输入待匹配文本"></textarea>
      </div>

      <div class="field">
        <label for="replacement-input">替换模板</label>
        <input id="replacement-input" type="text" placeholder="支持 $1、$& 等占位符">
        <button id="replacement-btn" class="inline-btn">执行替换</button>
      </div>
      <div id="replacement-output" class="replacement-output" aria-live="polite"></div>
    </section>

    <section class="panel">
      <h2>语法结构可视化</h2>
      <div id="visualisation" class="visualisation" aria-live="polite"></div>
      <h3>语法说明</h3>
      <div id="token-table" class="token-table" aria-live="polite"></div>
    </section>

    <section class="panel">
      <h2>匹配结果</h2>
      <div id="match-preview" class="match-preview" aria-live="polite"></div>
      <h3>捕获组详情</h3>
      <div id="match-detail" class="match-detail" aria-live="polite"></div>
      <h3>常用语法速查</h3>
      <dl class="cheatsheet">
        <div><dt>^</dt><dd>匹配输入的开头</dd></div>
        <div><dt>$</dt><dd>匹配输入的结尾</dd></div>
        <div><dt>.</dt><dd>除换行符外的任意单个字符</dd></div>
        <div><dt>*</dt><dd>重复 0 次或多次</dd></div>
        <div><dt>+</dt><dd>重复 1 次或多次</dd></div>
        <div><dt>?</dt><dd>重复 0 次或 1 次</dd></div>
        <div><dt>{n,m}</dt><dd>重复 n 到 m 次</dd></div>
        <div><dt>(...)</dt><dd>捕获分组</dd></div>
        <div><dt>(?:...)</dt><dd>非捕获分组</dd></div>
        <div><dt>[abc]</dt><dd>字符集合</dd></div>
        <div><dt>\\d / \\w / \\s</dt><dd>数字 / 单词字符 / 空白</dd></div>
      </dl>
    </section>
  </main>

  <footer class="page-footer">
    <p>GitHub Pages 即可部署，无需后端服务。构建于原生 Web 技术，可离线使用。</p>
    <a href="https://github.com/" target="_blank" rel="noopener">了解如何部署到 GitHub Pages</a>
  </footer>

  <script src="app.js"></script>
</body>
</html>
